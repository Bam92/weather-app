<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <style>
    section {
      height: 600px;
      width: 100vw;
      color: white;
      background: url("1.jpg");
      /* overflow: hidden; */
      background-size: cover;
      background-position: center;
      /* background: #58ffd2; */
      /* background: linear-gradient(rgba(29, 38, 113, 0.9), rgba(195, 55, 100, 0.9)); */
    }

    section::before {
      content: "";
      background: #58ffd2;
      width: 100%;
      opacity: 0.5;
    }

    /* img {
        object-fit: cover;
    } */
  </style>
  <body>
    <section>
      <h1>Weather app</h1>
      <form>
        <input
          type="search"
          name="search"
          id="search"
          placeholder="type the city"
        />
        <input type="submit" value="Go" />
      </form>
      <h3 id="city"></h3>

      <div class="temperature">
        <p>Today's temp</p>
        <p id="main">Temp: <span></span> <sup>°</sup>C</p>
        <p id="min">Min: <span></span> <sup>°</sup>C</p>
        <p id="max">Max: <span></span> <sup>°</sup>C</p>
      </div>
    </section>

    <script>
      // Get DOM elts
      const mainTemp = document.querySelector("#main span");
      const min = document.querySelector("#min span");
      const max = document.querySelector("#max span");
      const form = document.querySelector("form");
      const cityElt = document.getElementById("city");

      let city = "";
      const isOk = (response) =>
        response.ok
          ? response.json()
          : Promise.reject(new Error("Failed to load data from server"));
      const apiKey = "a1765436a53fce9de8bc00af314f1102";

      form.addEventListener("submit", (e) => {
        const { search } = form.elements;
        city = search.value;

        fetch(
          `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`
        )
          .then(isOk) // <= Use `isOk` function here key a1765436a53fce9de8bc00af314f1102
          .then((data) => {
            const { main, sys } = data;

            mainTemp.textContent = main.temp;
            min.textContent = main.temp_min;
            max.textContent = main.temp_max;
            cityElt.textContent = `${city}, ${sys.country}`;

            console.log(data); // Prints result from `response.json()`
          })
          .catch((error) => console.error(error));

        e.preventDefault();
      });
    </script>
  </body>
</html>
